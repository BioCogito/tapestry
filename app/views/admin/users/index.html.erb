<h2>Users</h2>

<h3>Filter users</h3>
<% form_tag admin_users_path, { :method => 'get' } do  %>
  <ul>
    <li><%= link_to "Show all users", admin_users_path(:all => true) %></li>
    <li><%= link_to "Show enrolled users", admin_users_path(:enrolled => true) %></li>
    <li><%= link_to "Show users eligible to be enrolled (who have submitted their enrollment application)", admin_users_path(:eligible_for_enrollment => true) %></li>
    <li><%= link_to "Show users ineligible to be enrolled (who have submitted their enrollment application)", admin_users_path(:ineligible_for_enrollment => true) %></li>
    <li><%= link_to "Show inactive users", admin_users_path(:inactive => true) %></li>
    <li>
      <label for="completed">Show users who have completed enrollment step:</label>
      <%= select_tag 'completed',
          options_for_select(EnrollmentStep.ordered.all.map { |es| ["##{es.ordinal} - #{es.title} ", es.keyword] },
                             params[:completed])%>
      <%= submit_tag 'Show' %>
    </li>
  </ul>
<% end %>

<h3>Eligibility Actions</h3>
<ul>
  <li><%= link_to "Bulk promote some users", new_admin_bulk_promotion_path %></li>
  <li><%= link_to "Bulk waitlist some users", new_admin_bulk_waitlist_path(:phase => 'preenroll') %></li>
</ul>

<h3>Enrollment Actions</h3>
<ul>
  <li><%= link_to "Bulk enroll some users", admin_enroll_users_path() %></li>
  <li><%= link_to "Bulk enroll some users (e-mail list)", new_admin_bulk_promotion_path(:require => 'enrollment_application') %></li>
  <li><%= link_to "Bulk waitlist some users (e-mail list)", new_admin_bulk_waitlist_path(:phase => 'enroll') %></li>
</ul>

<p>Download this list of users as <%= link_to 'CSV',
  formatted_admin_users_url(:format => 'csv',
                            :all                         => params[:all],
                            :enrolled                    => params[:enrolled],
                            :eligible_for_enrollment     => params[:eligible_for_enrollment],
                            :ineligible_for_enrollment   => params[:ineligible_for_enrollment],
                            :inactive                    => params[:inactive],
                            :completed                   => params[:completed]
                           ) %></p>

<h3>Find users</h3>
<table>
  <tr>
    <th>Name</th>
    <th>Email</th>
  </tr>
<% form_tag admin_users_path, { :method => 'get' } do  %>
  <tr><td>
  <%= text_field_tag :name %></td>
  <td>
  <%= text_field_tag :email %></td>
  <td>
  <%= submit_tag 'Show' %></td></tr>
<% end %>
</table>

  
<%= render :partial => 'usertable' %>

